---
Source File Name: 75-Interception.docx
AssetID: 969b6f02-4da3-41d1-8527-c9e0009d1632
Title: Enterprise Library Call Handlers
Order In ToC: 2\6\3
Output Filename: 2\6\3_Enterprise Library Call Handlers.markdown
---

#### Markdown Test ####
# Enterprise Library Call Handlers #
----------


> ![](../../images/note.gif)#!155CharTopicSummary!#:
> 
This section discusses some of the common scenarios for using the Policy Injection Application Block call handlers.

The [patterns & practices Enterprise Library](http://msdn.microsoft.com/entlib/) includes a set of call handlers and the equivalent call handler attributes designed for use with the Unity **PolicyInjectionBehavior**. This section discusses some of the common scenarios for using the Policy Injection Application Block call handlers. It examines the following common scenarios where the block can simplify and accelerate application development:  
+ <a href="#scenarios_logging" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">Logging Method Invocation and Property Access</a>
+ <a href="#scenarios_exceptions" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">Handling Exceptions in a Structured Manner</a>
+ <a href="#scenarios_validation" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">Validating Parameter Values</a>
+ <a href="#scenarios_authorization" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">Authorizing Method and Property Requests</a>
+ <a href="#scenarios_performance" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">Measuring Target Method Performance</a>

# Logging Method Invocation and Property Access #
<a name="scenarios_logging" href="#" xmlns:xlink="http://www.w3.org/1999/xlink"><span /></a>Enterprise applications usually provide rich and detailed information about their operation in order to help administrators and operators measure activity, audit actions that take place, and detect unusual behavior, errors, and failures. Enterprise Library provides a handler that takes advantage of the features exposed by the Enterprise Library Logging Application Block. These features allow developers and administrators to configure logging to the Windows Event Log, e-mail messages, databases, message queue systems, text files, Windows Management Instrumentation (WMI) events, or custom locations. For more details about logging method invocations and property accesses, see [The Logging Handler](./3/3_The Logging Handler.markdown).  

# Handling Exceptions in a Structured Manner #
<a name="scenarios_exceptions" href="#" xmlns:xlink="http://www.w3.org/1999/xlink"><span /></a>All applications should handle errors in order to protect the application and to provide information for users, operators, administrators, and developers. Within .NET Framework-based applications, the most common scenario is handling exceptions raised by the application code, executing suitable recovery tasks where practicable, and raising the exception to the calling code or user interface.  
Enterprise Library provides a handler that takes advantage of the features exposed by the Enterprise Library Exception Handling Application Block. These features allow developers to create a consistent strategy for processing exceptions that occur in all architectural layers of an enterprise application. They also allow administrators to define and maintain exception handling policies, and they support the following:  
+ Logging exception information.
+ Hiding sensitive information by replacing the original exception with another exception.
+ Wrapping exceptions inside a new exception to maintain contextual information.
+ Combining these tasks so that, for example, the application block will log the information from an exception and then replace the original exception with another.
For more details about structured exception handling using policy injection, see [The Exception Handling Handler](./3/2_The Exception Handling Handler.markdown).  

# Validating Parameter Values #
<a name="scenarios_validation" href="#" xmlns:xlink="http://www.w3.org/1999/xlink"><span /></a>Applications should protect against errors caused by invalid or out-of-range values provided as input to the user interface or applied to methods or properties within the code. Writing validation code is always an onerous task and there is always the chance that you will repeat an action or overlook some unexpected situation. Enterprise Library provides a handler that takes advantage of the features exposed by the Validation Application Block; this minimizes the code developers have to create and it allows administrators to modify the validation policies through configuration if required.  
For more details about applying validation to class members using policy injection, see [The Validation Handler](./3/5_The Validation Handler.markdown).  

# Authorizing Method and Property Requests #
<a name="scenarios_authorization" href="#" xmlns:xlink="http://www.w3.org/1999/xlink"><span /></a>Distributed applications frequently use services and access classes that reside in separate security contexts. If the current user does not have permission to access a target class instance, an exception occurs that may be difficult to diagnose. Administrators and operators often find that a large proportion of application installation, set up, and run-time maintenance involves setting appropriate permissions and authorizing users and services.  
Enterprise Library provides a handler that will check the authorization status of the requesting user or thread against the target class permissions before calling the target method or accessing the target property. The authorization handler takes advantage of the features exposed by the Enterprise Library Security Application Block, using an authorization provider defined in the application configuration.  
For more details about authorizing requests to members of a class using policy injection, see [The Authorization Handler](./3/1_The Authorization Handler.markdown).  

# Measuring Target Method Performance #
<a name="scenarios_performance" href="#" xmlns:xlink="http://www.w3.org/1999/xlink"><span /></a>Enterprise Library contains instrumentation that allows developers, administrators, and operators to monitor the performance of the application blocks they use in their applications. In most cases, developers will also include instrumentation, such as performance counters, within their code to support monitoring of classes and resources used by the application. Enterprise Library and Unity provide additional and easy-to-use features for monitoring performance of target classes in the form of a handler that measures the time taken for the request to pass through the handler pipeline to the target class instance, and back to the application.   
One such feature is part of the logging handler; it requires only the addition of this handler as the first in the policy pipeline. The logging handler takes advantage of the features exposed by the Enterprise Library Logging Application Block, and it exposes the call duration as a property of the **TraceLogEntry** class. For more details about how the **CallTime** property exposed by the logging handler can provide performance measurement for individual methods, see [The Logging Handler](./3/3_The Logging Handler.markdown).  
Another option for measuring the performance of the target methods is to use the performance counters handler. This handler increments a number of performance counters that provide detailed performance information, including the average execution time for the method and the number of times the method is called. For more information, see [The Performance Counter Handler](./3/4_The Performance Counter Handler.markdown).  

# More Information #
To understand how call handlers and the interception mechanism work, and how you can configure interception and policy injection, see the following topics :  
+ [Using Interception and Policy Injection](../6_Using Interception and Policy Injection.markdown)
+ [Configuring Unity](http://msdn.microsoft.com/library/62fd666c-08c5-424a-b484-9e0b87994997)
+ [Attribute-Driven Policies](./2_Attribute-Driven Policies.markdown)
+ [The Authorization Handler](./3/1_The Authorization Handler.markdown)
+ [The Exception Handling Handler](./3/2_The Exception Handling Handler.markdown)
+ [The Logging Handler](./3/3_The Logging Handler.markdown)
+ [The Performance Counter Handler](./3/4_The Performance Counter Handler.markdown)
+ [The Validation Handler](./3/5_The Validation Handler.markdown)
+ [Extending and Modifying Unity](http://msdn.microsoft.com/library/13f11174-8fd1-4406-8bc7-9da9c762811d)


